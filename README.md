# AiPet - 智能桌面宠物 (Desktop Pet)

AiPet 是一个基于 Python + PyQt5 开发的可扩展桌面宠物应用程序。它支持 Live2D 模型展示、静态图片模式、点击互动、TTS 语音合成以及接入大语言模型 (LLM) 进行智能对话。

## ✨ 主要功能 (Features)

*   **双渲染模式**：
    *   **Live2D 模式**：支持加载 `.model3.json` 模型，具备动作交互和口型同步。
    *   **图片模式**：支持传统的静态图片/GIF 帧播放。
*   **智能交互**：
    *   **点击互动**：左键点击触发随机语音/动作，右键呼出菜单。
    *   **智能对话**：集成 LLM API (如 Ollama, ChatGPT 等)，支持流式对话。
    *   **语音合成 (TTS)**：支持接入 TTS API (如 GPT-SoVITS)，实现语音回复。
*   **高度可配置**：
    *   内置 **角色编辑器**，可轻松导入新模型、配置语音和人设。
    *   支持自定义拖拽、缩放、透明度调整。
*   **平滑体验**：
    *   优化的窗口拖拽逻辑，气泡跟随平滑。
    *   WebEngine 事件穿透处理，确保 Live2D 交互无缝衔接。

## 🛠️ 安装与运行 (Installation & Usage)

### 环境要求
*   Windows 10/11 (建议)
*   Python 3.8+

### 1. 克隆项目
```bash
git clone https://github.com/your-username/AiPet.git
cd AiPet
```

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 运行程序
```bash
python src/main.py
```

## ⚙️ 配置说明 (Configuration)

### 系统设置
程序启动后，右键点击桌宠选择 **"⚙️ 控制台" (Settings)** 即可进行全局配置：
*   **API 设置**：配置 LLM 和 TTS 的后端地址。
*   **显示设置**：调整缩放比例、刷新率。
*   **互动设置**：自定义随机闲聊内容。

### 添加角色 (Add Characters)
在控制台的 **"角色管理"** 标签页中：
1.  点击 **"➕ 新建"** 创建新角色。
2.  选择 **渲染模式** (图片/Live2D)。
3.  导入对应的素材文件夹。
4.  设置 **人设 Prompt** 和 **TTS 音色**。
5.  保存后即可切换。

## 📂 目录结构
```
AiPet/
├── config/             # 全局配置文件
├── resources/          # 资源文件
│   └── characters/     # 角色数据 (模型, 图片, profile.json)
├── src/
│   ├── main.py         # 主程序入口
│   └── web/            # Live2D 渲染器 (HTML/JS)
└── requirements.txt    # 依赖列表
```

## 📢 免责声明与版权致谢 (Disclaimer & Credits)

本项目是一个开源的桌面宠物**框架**，仅提供代码实现。项目中演示所涉及的 Live2D 模型、音频、图片等素材均来源于网络，版权归原作者所有。

**请使用者在使用本程序时严格遵守以下规定：**

### 1. Live2D 模型素材
项目中演示使用的 **胡桃 (Hu Tao)** 模型素材：
*   **原画来源**：miHoYo (米哈游)
*   **模型制作**：孤言 (B站 ID: [孤言omo](https://space.bilibili.com/12554228))
*   **画师**：不愿透露姓名的好人
*   **素材来源**：B站 UP 主 孤言omo

**⚠️ 模型使用特别声明：**
1.  本模型的版权归属于 **miHoYo (米哈游)**。
2.  本模型仅可用于个人学习、桌面展示或符合《原神》官方二创规定的视频制作。
3.  **严禁用于任何形式的商业盈利活动（包括但不限于直播盈利）。**
4.  **严禁涉及政治宣传或违反法律法规的内容。**
5.  **严禁二次配布（二次分发/转载模型文件）。**
    *   *注：为了遵守此规定，本仓库不包含完整的 Live2D 模型文件。请前往原作者主页下载并导入。*
6.  模型师和画师不对任何违规使用行为承担责任。

### 2. 音频与图片素材
*   项目中涉及的游戏语音、角色图片版权归 **miHoYo (米哈游)** 所有。
*   请勿提取相关素材用于商业用途。

### 3. 技术支持
*   语音合成 (TTS) 技术支持：[GPT-SoVITS](https://github.com/RVC-Boss/GPT-SoVITS)。感谢 RVC-Boss 团队的开源贡献。
*   Live2D Web 渲染支持：PixiJS & Live2D SDK。

---

## 📝 许可证 (License)

本项目的**代码部分**采用 **MIT 许可证**。
这意味着您可以自由地修改和分发本项目的**源代码**，但必须保留原作者版权声明。
**注意：MIT 许可证不适用于上述列出的任何美术资源（模型、音频、图片）。这些资源保留其原有的版权协议。**

---
**Enjoy your AI Pet! 🐾**